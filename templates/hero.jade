extends base

block content
    div.hero
        -var hero_dmg = hero.dmg.split('-');

        img.hero-icon-100px(src='/img/heroes/' + hero.slug + '.jpg')
        span.name=hero.name
        span.role  - #{hero.role}
        br
        span.bar-max.hp
            span.bar(style='width:' + hero.hp/3.5 + 'px;')=hero.hp
        br
        span.bar-max.dmg
            span.bar(style='width:' + hero_dmg[0]*2.5 + 'px;')=hero.dmg
        br
        span.bar-max.armor
            span.bar(style='width:' + hero.armor*20 + 'px;')=hero.armor
        br
        span.bar-max.diff
            span.bar(style='width:' + hero.difficulty*30 + 'px;')=hero.difficulty
        br
        div.clear
        h2 Top counter for #{ hero.name }:
        div.hero-counters
            //-- var counter_link = user ? '/counter/' + hero.slug : '/login';
            //-ul
            //-    each counter in counters
            //-        li
            //-            a(href='/hero/' + counter.name)
            //-                img.hero-icon-70px.left(src='/img/heroes/' + counter.slug + '.jpg')
            //-            div.name.left =counter.name
            //-            // TODO:fix responsiveness
            //-            div.vote.left(style='left:62px;')
            //-                a.button(href=counter.voteup) up
            //-            div.vote.left(style='left:97px;')
            //-                a.button(href=counter.votedown) down
            //-            div.vote.button.left(style='left:153px;') =counter.votes
            //-            div.clear
            //-    li
            //-        a.button.center.add(href=counter_link) add a counter
            //-div.clear

    script(type='text/javascript')
        $('.bar').each(function() {
            $(this).on('mouseenter', function() {
                var a = $(this).parent();
                a.css('background', '#ffa500');
                if (a.hasClass('hp')) a.css('width', '184px');
                else if (a.hasClass('dmg')) a.css('width', '158px');
                else if (a.hasClass('armor')) a.css('width', '140px');
                else if (a.hasClass('diff')) a.css('width', '155px');
            });
            $(this).on('mouseleave', function() {
                $(this).parent().css('background', '#555');
                $(this).parent().css('width', 'auto');
            });
        });
